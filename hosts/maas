[maas:children]
database
messaging
ironic

[ironic:children]
ironicapi
ironicconductor


[database:vars]
mysql_database_list:
  - name: "ironic"
mysql_user_list:
  - name: "ironic"
    password: "mysql"
    priv: "ironic.*:ALL"


[messaging:vars]
rabbitmq_vhost_definition_list:
  - name: "ironic"
rabbitmq_users_definition_list:
  - user: "ironic"
    password: "rabbitmq"
    vhost: "ironic"
    tags:
      - "administrator"
      - "management"


[ironic:vars]
ironic_oslo_messaging_rabbit_host: "{{ hostvars.database.ansible_ssh_host }}"
ironic_oslo_messaging_rabbit_userid: "ironic"
ironic_oslo_messaging_rabbit_password: "rabbitmq"
ironic_oslo_messaging_rabbit_virtual_host: "ironic"
ironic_database_mysql_host: "{{ hostvars.messaging.ansible_ssh_host }}"
ironic_database_mysql_userid: "ironic"
ironic_database_mysql_password: "mysql"
ironic_database_mysql_db: "ironic"
ironic_enabled_drivers:
  - "pxe_ipmitool"
  - "agent_ipmitool"
dnsmasq_conf_domain: "pxe.internal.example.com"


[ironicapi:vars]
ironic_conductor: False
ironic_api: True
ironic_my_ip: "{{ ansible_eth0.ipv4.address }}"


[ironicconductor:vars]
ironic_conductor: True
ironic_api: False
ironic_my_ip: "{{ ansible_eth0.ipv4.address }}"
ironic_conductor_api_url: "http://{{ hostvars.ironicapi.ansible_ssh_host }}:6385/"
ironic_pxe_tftp_server: "{{ ironic_my_ip }}"
dnsmasq_conf_dhcp:
  eth0:
    range: ["10.230.44.160", "10.230.44.179", "infinite"]
    ignore_names: true
    generate_names: true
    option:
      - "option:router,10.0.0.1"
      - "option:ntp-server,0.0.0.0"
      - "option:dns-server,8.8.8.8"
    boot:
      - "{{ ironic_pxe_bootfile_name }}"
    tftp: "{{ ironic_pxe_tftp_root }}"


## Server list

[database]
database ansible_ssh_host=127.0.0.1 ansible_ssh_port=2222

[messaging]
messaging ansible_ssh_host=127.0.0.1 ansible_ssh_port=2222

[ironicapi]
api ansible_ssh_host=127.0.0.1 ansible_ssh_port=2222

[ironicconductor]
conductor ansible_ssh_host=127.0.0.1 ansible_ssh_port=2222
